# Post-Quantum Relay

## Post-Quantum Nostr Events Relay

This project demonstrates the feasibility of integrating post-quantum cryptography into the nostr protocol. 

This project makes use of [liboqs-python](https://github.com/open-quantum-safe/liboqs-python)

As for digital signature algorithms, I used `ML-DSA-44` as the post-quantum default which is specified in [FIPS-204](https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.204.pdf). To distinguish a pq event, I look at the size of the `pubkey` - if it is longer than 64 bytes, I invoke the `ML-DSA-44` algorithms. That's about it. 

The downside is that the size of the `pubkey` and `sig` of the pq events are massive, but it works and the modified relay can handle both regular and pq events. I have not done any benchmarking yet.  I don't see this replacing the typical nostr `kind 1` events, but pq events can be used for events that store sensitive data and possibly vulnerable to **Harvest Now and Decrypt Later** (HNDL) attacks.

The primary motivation for this project is to understand what post-quantum cryptography actually means for the nostr ecosystem - to show that it's not that hard to integrate, and that it can be easily integrated into apps and relays and be used when appropriate. With what I have learned, I plan to implement in my project [Safebox](https://github.com/trbouma/safebox) which will eventually require a `pqrelay` which I hope can become standardized as a NIP and then incorporated into the popular relay implementations.



## Installing

For ubuntu you might need to first install these prerequisites:

```
apt-get update && apt-get install -y --no-install-recommends \
    build-essential \
    cmake \
    git \
    ca-certificates \
    pkg-config \
    openssl \
    libssl-dev \
```

Cloning the repo, creating a virtual enviroment, installing the dependencies and starting the relay 

```
git clone https://github.com/trbouma/pqrelay.git
cd pqrelay
python3 -m venv .venv
source .venv/bin/activate
pip install --no-cache-dir -r requirements.txt
python app/replay.py
```
If all goes well, and it is the first time, it will automatically download and compile the oqs c libaries. This may take several minutes. Go grab a coffee!

Once running, the pqrelay is available at `0.0.0.0:8735` - and should be accessibe at `ws://localhost:8735`

I created A simple test script [nostr.py](./app/nostr.py) create a regular and pq signed events, publishes to the relay and then retrieves the events. You'll see something like this.

```
(.venv) trbouma@Mac pqrelay % python app/nostr.py
liboqs-python faulthandler is disabled
length of private key 5120
nostr pqevent {'id': 'e61c714001428420acf6c9c65973dbd3cd4a1ba7828b206b97cf52a98aee0892', 'pubkey': 'dc9a2669b7a0a57a30970678ec487bee857ddf6ca2423126b7724ffce0cea1ab06f99f9872e6cfd029d06d8921e0b30b15b21aa240f29870d3fa703de5fd997f59c6b6c3a3398e3db7a409dfcc7740b719823feafcd53b796c023fd410cb84b1ef54e7cff28a3dc64a94baf2f641acd8ca5bf70eaf20b28802b803718a23e28d92185ba8f332745e029eec142d03d890a6ca610027d62361673371bfca81d670bc2429f3b0d7bc59f6552cabde411e33c5a0015d69c85a90e6f550ee895f56773224b18794801ad5cc047bc859a452e1696c452d6b5ff5307be46312892d6efd2b0cd750c4127ff9ef1f8edaeb2fb9ccc63faba31d11d45798a1c8a498b088b6dd3e3d571cd6949a1cf3c65082335356302a4d0f7aef8f7ce13b1fe41671604a437518ffe0048cd39cedc2a5262e869c2036f006632847413535aa5e4bdec6118962cc2007ec33542ce884b0ac72211966b32f3765c78a2bb927144d40db2f1c138d857dba0dfe9d46ecc3dd138764cb5e29b412583013bf5e84e905a4e1ce7df240e1fb8d821829cba460bcb8ac63aee50ae99044385e674ae8cc4e086ebbc00e17e599ae5c30952b1ec679f48f4b25d9dfd481daea480cea69e4d7e01e0a4f1129739fe50ccb31e4d2b4581ddb203c03f014c3fcbca0dcbf5878a77a4c61f9bdc2baaa55d332bb1d657cb3d9e79fdea03bfcdcf324f41449575e07c8e328fec205b66d38f403defb84a69e913104851c7dbb568261ab9ccba2892b5e2f04313c3f1fb6810502d8b3948f8d118cd5665ab5bdafa96bbcf5c9050b45deea80a6f0f1ea2055639fe480e6ad7176cb0208d863ff0fe4db7d370bfb64b56eaaf4bfc13d9dc3781fa5ed1f800756b734a01480875e2c40f6a39d98641a600096dba09e029c5c784415073a97249b6badb29f4ced6c394c74fbb603fc1a5b4104d3ae760a780015719f3f7202657e4610b6252c4398e1ee44f21bb7cc8be40510c3186003f5f493e88a7c5e34dfcd9dea08f3f1040ef772b9a7ce1056a3d8ee2effb774f76688002da9d40a0e7e9e56c59ce4ec83760524858a7c40a9df098f0e207335778269c9f48b84a710ee95c78cf9b626c9d7da0d801ef99e0077964cbf895b00e1d203d58879e96fab9391ce78124548ffaecfc9f84ac988623599b349c4ed497251344c14502cc58df441b02e52516b9fd7ea869be185da0700a78be295db96e65d85ed676ac6a26171b60d79dcc8c1a60c9531b82e34cb72617e592ed938e478b8dc07277a3516f97d62daf79042984c1cf99ec4802fca47be6a478dceeb2c48fc98f1292d8f7bd73cfdf4bc7273474b93c3ff569b95ad1c790bb5c90f651ba4e29779134d6361a47676290f6ff8c1861b41b0b59e6cd28d70e0bb1639dc091d6c9b80f4179ed67cb2c128ca1f9b4b42b9a8e9aafdf9080f01f98e851092ae97fb8d7bba3fc7a7bc0f2ae9e4ea5996bd485c5af87c24e88d261ea422d439c048917c460228ad1339d0ba7a3f9a633c8a5dff5935744a0ae7093a2a9b50c953f382ef0554c5808e4365ea8bd17a07bcb3fc3246613747332bd0afd939cb75fd0ca4ee21476d796e24ad148864cd41d02715aba3047a36f78bc68dc673de2dea76a4fd22cbcdb93b7fd086243b889734d82f972691a0dac2ad27dcef77dc916f58a883136de7d0f5ae8211424ea2a1fb684f2f612c0a4cafc6dc89ec9d42272cf1358ec716c3ea569deabab6c580e1d15b21f94cf58316eebdb1c772e67420b9286d249fb2c5c6dd4c88ebdf183b8687de6b20293376b40fed81aae73ac7edf6dc542bad32af61eef4e376f79d4b06d400c779c9abdad491952ffafce16c2b', 'created_at': 1767721982, 'kind': 100001, 'tags': ['t', 'quantum_safe'], 'content': 'quantum event again', 'sig': '1b9cfd30153f4b9be9c33a7d9108d2f4abeee3e5b1cca248ccb4ffca6af4a1ee9e020773b235b76ce5c83a9736653b653460056dcbf12143a30b9c9111ef3d191196d3c985f62c35bbb94f87a551da5df7c68beb9029b3fc1cac5a9fe28b69cc093885e6d58e74dd07083173dd60dbba86b1c9e5109756286592b7819a8bbfc106bdfcfe352bfa1878ed4d53b0c87c82ef64f3d156a00d84d2d31a2df9f9d7a188160706f7abd8536c2bfbf6a2992929f492e900ac8eceafededccc618df4267958d128a1472cbd405428a27972ce17a90430864fa3c4bcb5670f5f073c52279e8822c8d27d7c41bcb158f76e791d9b2273fe4f7609e0714a0fd03ba589536e9d0b82d38ea3e003236ae3aa590a6e07cb758b29ba7e81d41e68cf26b681ec8651a837c084aa3fe57e4324d63960feaed08514a7917da3d71c0221298c795cfc92d6441b35ca1c9af700aefe9418672cad8bd58d4a76b9d2855efa56f12db534379d51533d680acc1db3edf05ae931eba43d91371ed889c2b64dde45a7cd8b65c930cc96403c66d9fd7c9b836fc139478411880207d868e707417cd07b2c6359402dcb94f1d6b0be50eff0353b724670805bd9ecd59f79657c58062bbb387ac4aef4c956b4d3ea274a13f241de2c519c4f58d4be5ba9b4adf444e1e7adcc35e4e63cf1c1052a6c963a1be453c18bcebcfa4cf52361e21734ede91548d857bd22197ed4ccb4036d9226dac0a70a8ef2b2c43a3706532870e4d8af89db68d9301ce1f84eeec21163a659a75a79602a201eeea2cd8cf49bb93bf5b34cba34d133ed5d55f8dd27abb181a721dc6a167a19105b5240b47921cda113abf5d8ff73370eb2a746d41b444c2259916fb9e27c3fd93c415b031b330bc80bc0a8182ece3f541d6910607a45f3cd31e2f8ac7342857e1563d320dfdcf2bcbccddc8ca6a5830416f439b431c5541797beae3db29ae7938273760a5d01dde4fd26a8eff6af318aa783ae38f2237090868c0e310351ac84882c85babeb0049181aa8c24cec2e17db06cc233b10a00dd772a88954aa9fe5115886806389bff33d338d29d48f39ee65f1a3c49faa0946204c55d9b02cc5eff37d7ccbc89ca04e2f612530aadc10b083f89f152960d426f5c403c52c10ce200442f4d4801ba23156cc8c1a1c458864f54dedc28bb7f4c0978b8ac911b27872509b391169c2a92b3f1723a3cb1ea1c8cff7e90f7acb45138b90934133df02a8bbd2ea6c5f8e13f66e83d2065031e7b36c1e00be268e50e54a48c65c347a0fe5e8fbf34984d1ff8c129233cfe4154b5fcbcbba03b71ffaf4ae46dd45ed1d35d04e7fc3195a69de0cf0f07198c26876dd18a21a0ac9534d380d972f72afaff4ca9066cf3861fbe05558889fe44ed697b787f722111a3fa1b15aacfd4cec5be006a8a97e26ccda7068f74a77f43c9f3539dfc363b790cfad49ac38adaaa04836c80de22f29152019592121777488b4067e61bc605e2687d1e4eb5309f6cfae7dcfec9df1560b19d81b9013d792bb612930ff328bb6973b36cc5efc5e380b8ff66041800297af6a35fa27083e641e522ddb78d7c9366d5c896bdc810015e12c8a1cd62a9aa694d8c05b9610a5a90099d1657b2a8baa6b0994771072d4f879ed54ec0940b9fb9ff71c5dcbc539024a169a4278c0e66d0428692d856f7ceec2404f8b7a89700763ef1d4f205d2e47d9273227647953d9853ffb11e7ee07dd3d58df42aca5bb874b858f4314d5d99cfcb647fcdba7b1beb9ee18be09b474ce7d8832121d3d3ac515a8475c5d4fe520d6f88b90ff2599f1aa1556f4fefbba4322aded10c975705ae823cacd7b3c37129b54303a149090052460881932f4b4ce6d582293e1b91168ad5a7bd2edbe866be9533451a9c0a4fd2ce48da0c2117ef253f4bfef148aff6ba62fbe01861bc6234c145651032292a88c0460eadc9005c270df092308f9d5e9f3b4e729719031a17940f363587285aacb96790ab78cc6c2e95af157b0a2eda9dc316fe04f46195448d33989353991b61b025682a8c92295d4121b3c10895749c0ca09f1753f33b92f39bebb05e13ab9a74c18176c65084e8abacabf4631251dbee67f77c0bfe40db1651bddc0073c018f3acce4e90da7e8613034cd273efc237ef3ab1ad8ed9cf7fa1004541b8122d155b805879e11492caac8ef5f9a3df25b269d9d2dbd8dc0a14e5568b487600249fd79f9663b70f0a43ba94b3a608c0dd3fafab3e3ef3b28cc0f656a4c700456d35b8ee1668bbe957034aba06e67928ed6e00f47cd51a67513aa78761fe6b1e8745d9789381a49e65cccaef5421e77ad8380a18d87dbcc8dec1d88e08530d7ab76a4cf4ee36dfbf3760d3f3ebf459b3364c3348efb9c3a4aa2cca95d2d3bf39c71114b1c78e83a4d8786acd2ba712e7c839f7a2ad7cec41eb83c4380ffe6cc6ecc6d6ff8dcf95b2b9ea515cf7b0355c931b14d3910697332b23b3a161446c88349e19fb8a6c217a9eb721e6e3da3422d754ee646e7ba977ae84e0318a04865efb2fa3bd21d2b5c2f82b93121f827475bdb969de483f8cc7e509866e91fb64492ee9797be721c046709b42ab419dfa17cb059f59d456a11f68775112829b8d87fee4c02e623ff3b7c5c510e3d2887fc9753631d095538def4d229e774237a0f56ac3bd60dd37efb3c3b1f5691bc2e42a0238df7918dcfa5cadd5baab1dbcb0931336ca2e8799ea6179c503e41073c5b9d78c6d10918b12762f29ffbc703c6155db80b46ad51a21e908961fa8f375819a53b6e27f5146246c1f561217b16d2f8b7688d80724f79dafba59eb1e12566ee297a9f37ff56d3939bb6ab85e2ff5de08c84ad1cbf5120eb6cc8c6a4b34d84cf03bdea2ab544c285d8c8e747f9b807c73fdae90fdb7f780b515d419c624e55ed07ceb4336a91b585869e2198b2d906a024b32c8e57afd7a284af8b9d1fc387416826df8c74dd8ad6e949b9d44ab190d58ecd7308fe6f3b9f9de2860459c12fee9a2b53300a9f083c5be0a1cdac2c28d119ac368971c18283f6832b9a665ef6565bf65a9ffc32d50965562eb776dae5f6c3565c6e9ed4a23c83fa20042a5b882e99758c008b443563caf7f0d5333c47f436fa30c201233fb7de5a5a3efdbb197f90d664be6b9a8e958bae27b032f2bfe1407c394c81442ffcbee12f57e5b05f4cd39d8b7f7c4459cc2038ad675b2eb452e95118b2c58c6a5f9d23f85052ad4d40209b547dce5a0ea0ef5cdf0e2bf53e635d4cb4ed14396ed3a92d990de066f0cbd1e3027afcc898f48cc311899095dd050e203c677c8696a2adb5bbc5eef4f81d3f425a5c626a727b7e81a4a6bfcfd7dc111b424d5477a3ae13506167757d858a9294c0cfe1fd0000000000000000000000000000000000000000000000000010212937'}
is valid: True
check to see if reqular event is valid True
publish regular event is valid True
regular event published!
publish pqc event is valid True
check to see if pqc event is valid True
pq event published!
event data: {'id': 'e61c714001428420acf6c9c65973dbd3cd4a1ba7828b206b97cf52a98aee0892', 'pubkey': 'dc9a2669b7a0a57a30970678ec487bee857ddf6ca2423126b7724ffce0cea1ab06f99f9872e6cfd029d06d8921e0b30b15b21aa240f29870d3fa703de5fd997f59c6b6c3a3398e3db7a409dfcc7740b719823feafcd53b796c023fd410cb84b1ef54e7cff28a3dc64a94baf2f641acd8ca5bf70eaf20b28802b803718a23e28d92185ba8f332745e029eec142d03d890a6ca610027d62361673371bfca81d670bc2429f3b0d7bc59f6552cabde411e33c5a0015d69c85a90e6f550ee895f56773224b18794801ad5cc047bc859a452e1696c452d6b5ff5307be46312892d6efd2b0cd750c4127ff9ef1f8edaeb2fb9ccc63faba31d11d45798a1c8a498b088b6dd3e3d571cd6949a1cf3c65082335356302a4d0f7aef8f7ce13b1fe41671604a437518ffe0048cd39cedc2a5262e869c2036f006632847413535aa5e4bdec6118962cc2007ec33542ce884b0ac72211966b32f3765c78a2bb927144d40db2f1c138d857dba0dfe9d46ecc3dd138764cb5e29b412583013bf5e84e905a4e1ce7df240e1fb8d821829cba460bcb8ac63aee50ae99044385e674ae8cc4e086ebbc00e17e599ae5c30952b1ec679f48f4b25d9dfd481daea480cea69e4d7e01e0a4f1129739fe50ccb31e4d2b4581ddb203c03f014c3fcbca0dcbf5878a77a4c61f9bdc2baaa55d332bb1d657cb3d9e79fdea03bfcdcf324f41449575e07c8e328fec205b66d38f403defb84a69e913104851c7dbb568261ab9ccba2892b5e2f04313c3f1fb6810502d8b3948f8d118cd5665ab5bdafa96bbcf5c9050b45deea80a6f0f1ea2055639fe480e6ad7176cb0208d863ff0fe4db7d370bfb64b56eaaf4bfc13d9dc3781fa5ed1f800756b734a01480875e2c40f6a39d98641a600096dba09e029c5c784415073a97249b6badb29f4ced6c394c74fbb603fc1a5b4104d3ae760a780015719f3f7202657e4610b6252c4398e1ee44f21bb7cc8be40510c3186003f5f493e88a7c5e34dfcd9dea08f3f1040ef772b9a7ce1056a3d8ee2effb774f76688002da9d40a0e7e9e56c59ce4ec83760524858a7c40a9df098f0e207335778269c9f48b84a710ee95c78cf9b626c9d7da0d801ef99e0077964cbf895b00e1d203d58879e96fab9391ce78124548ffaecfc9f84ac988623599b349c4ed497251344c14502cc58df441b02e52516b9fd7ea869be185da0700a78be295db96e65d85ed676ac6a26171b60d79dcc8c1a60c9531b82e34cb72617e592ed938e478b8dc07277a3516f97d62daf79042984c1cf99ec4802fca47be6a478dceeb2c48fc98f1292d8f7bd73cfdf4bc7273474b93c3ff569b95ad1c790bb5c90f651ba4e29779134d6361a47676290f6ff8c1861b41b0b59e6cd28d70e0bb1639dc091d6c9b80f4179ed67cb2c128ca1f9b4b42b9a8e9aafdf9080f01f98e851092ae97fb8d7bba3fc7a7bc0f2ae9e4ea5996bd485c5af87c24e88d261ea422d439c048917c460228ad1339d0ba7a3f9a633c8a5dff5935744a0ae7093a2a9b50c953f382ef0554c5808e4365ea8bd17a07bcb3fc3246613747332bd0afd939cb75fd0ca4ee21476d796e24ad148864cd41d02715aba3047a36f78bc68dc673de2dea76a4fd22cbcdb93b7fd086243b889734d82f972691a0dac2ad27dcef77dc916f58a883136de7d0f5ae8211424ea2a1fb684f2f612c0a4cafc6dc89ec9d42272cf1358ec716c3ea569deabab6c580e1d15b21f94cf58316eebdb1c772e67420b9286d249fb2c5c6dd4c88ebdf183b8687de6b20293376b40fed81aae73ac7edf6dc542bad32af61eef4e376f79d4b06d400c779c9abdad491952ffafce16c2b', 'created_at': 1767721982, 'kind': 100001, 'tags': ['t', 'quantum_safe'], 'content': 'quantum event again', 'sig': '1b9cfd30153f4b9be9c33a7d9108d2f4abeee3e5b1cca248ccb4ffca6af4a1ee9e020773b235b76ce5c83a9736653b653460056dcbf12143a30b9c9111ef3d191196d3c985f62c35bbb94f87a551da5df7c68beb9029b3fc1cac5a9fe28b69cc093885e6d58e74dd07083173dd60dbba86b1c9e5109756286592b7819a8bbfc106bdfcfe352bfa1878ed4d53b0c87c82ef64f3d156a00d84d2d31a2df9f9d7a188160706f7abd8536c2bfbf6a2992929f492e900ac8eceafededccc618df4267958d128a1472cbd405428a27972ce17a90430864fa3c4bcb5670f5f073c52279e8822c8d27d7c41bcb158f76e791d9b2273fe4f7609e0714a0fd03ba589536e9d0b82d38ea3e003236ae3aa590a6e07cb758b29ba7e81d41e68cf26b681ec8651a837c084aa3fe57e4324d63960feaed08514a7917da3d71c0221298c795cfc92d6441b35ca1c9af700aefe9418672cad8bd58d4a76b9d2855efa56f12db534379d51533d680acc1db3edf05ae931eba43d91371ed889c2b64dde45a7cd8b65c930cc96403c66d9fd7c9b836fc139478411880207d868e707417cd07b2c6359402dcb94f1d6b0be50eff0353b724670805bd9ecd59f79657c58062bbb387ac4aef4c956b4d3ea274a13f241de2c519c4f58d4be5ba9b4adf444e1e7adcc35e4e63cf1c1052a6c963a1be453c18bcebcfa4cf52361e21734ede91548d857bd22197ed4ccb4036d9226dac0a70a8ef2b2c43a3706532870e4d8af89db68d9301ce1f84eeec21163a659a75a79602a201eeea2cd8cf49bb93bf5b34cba34d133ed5d55f8dd27abb181a721dc6a167a19105b5240b47921cda113abf5d8ff73370eb2a746d41b444c2259916fb9e27c3fd93c415b031b330bc80bc0a8182ece3f541d6910607a45f3cd31e2f8ac7342857e1563d320dfdcf2bcbccddc8ca6a5830416f439b431c5541797beae3db29ae7938273760a5d01dde4fd26a8eff6af318aa783ae38f2237090868c0e310351ac84882c85babeb0049181aa8c24cec2e17db06cc233b10a00dd772a88954aa9fe5115886806389bff33d338d29d48f39ee65f1a3c49faa0946204c55d9b02cc5eff37d7ccbc89ca04e2f612530aadc10b083f89f152960d426f5c403c52c10ce200442f4d4801ba23156cc8c1a1c458864f54dedc28bb7f4c0978b8ac911b27872509b391169c2a92b3f1723a3cb1ea1c8cff7e90f7acb45138b90934133df02a8bbd2ea6c5f8e13f66e83d2065031e7b36c1e00be268e50e54a48c65c347a0fe5e8fbf34984d1ff8c129233cfe4154b5fcbcbba03b71ffaf4ae46dd45ed1d35d04e7fc3195a69de0cf0f07198c26876dd18a21a0ac9534d380d972f72afaff4ca9066cf3861fbe05558889fe44ed697b787f722111a3fa1b15aacfd4cec5be006a8a97e26ccda7068f74a77f43c9f3539dfc363b790cfad49ac38adaaa04836c80de22f29152019592121777488b4067e61bc605e2687d1e4eb5309f6cfae7dcfec9df1560b19d81b9013d792bb612930ff328bb6973b36cc5efc5e380b8ff66041800297af6a35fa27083e641e522ddb78d7c9366d5c896bdc810015e12c8a1cd62a9aa694d8c05b9610a5a90099d1657b2a8baa6b0994771072d4f879ed54ec0940b9fb9ff71c5dcbc539024a169a4278c0e66d0428692d856f7ceec2404f8b7a89700763ef1d4f205d2e47d9273227647953d9853ffb11e7ee07dd3d58df42aca5bb874b858f4314d5d99cfcb647fcdba7b1beb9ee18be09b474ce7d8832121d3d3ac515a8475c5d4fe520d6f88b90ff2599f1aa1556f4fefbba4322aded10c975705ae823cacd7b3c37129b54303a149090052460881932f4b4ce6d582293e1b91168ad5a7bd2edbe866be9533451a9c0a4fd2ce48da0c2117ef253f4bfef148aff6ba62fbe01861bc6234c145651032292a88c0460eadc9005c270df092308f9d5e9f3b4e729719031a17940f363587285aacb96790ab78cc6c2e95af157b0a2eda9dc316fe04f46195448d33989353991b61b025682a8c92295d4121b3c10895749c0ca09f1753f33b92f39bebb05e13ab9a74c18176c65084e8abacabf4631251dbee67f77c0bfe40db1651bddc0073c018f3acce4e90da7e8613034cd273efc237ef3ab1ad8ed9cf7fa1004541b8122d155b805879e11492caac8ef5f9a3df25b269d9d2dbd8dc0a14e5568b487600249fd79f9663b70f0a43ba94b3a608c0dd3fafab3e3ef3b28cc0f656a4c700456d35b8ee1668bbe957034aba06e67928ed6e00f47cd51a67513aa78761fe6b1e8745d9789381a49e65cccaef5421e77ad8380a18d87dbcc8dec1d88e08530d7ab76a4cf4ee36dfbf3760d3f3ebf459b3364c3348efb9c3a4aa2cca95d2d3bf39c71114b1c78e83a4d8786acd2ba712e7c839f7a2ad7cec41eb83c4380ffe6cc6ecc6d6ff8dcf95b2b9ea515cf7b0355c931b14d3910697332b23b3a161446c88349e19fb8a6c217a9eb721e6e3da3422d754ee646e7ba977ae84e0318a04865efb2fa3bd21d2b5c2f82b93121f827475bdb969de483f8cc7e509866e91fb64492ee9797be721c046709b42ab419dfa17cb059f59d456a11f68775112829b8d87fee4c02e623ff3b7c5c510e3d2887fc9753631d095538def4d229e774237a0f56ac3bd60dd37efb3c3b1f5691bc2e42a0238df7918dcfa5cadd5baab1dbcb0931336ca2e8799ea6179c503e41073c5b9d78c6d10918b12762f29ffbc703c6155db80b46ad51a21e908961fa8f375819a53b6e27f5146246c1f561217b16d2f8b7688d80724f79dafba59eb1e12566ee297a9f37ff56d3939bb6ab85e2ff5de08c84ad1cbf5120eb6cc8c6a4b34d84cf03bdea2ab544c285d8c8e747f9b807c73fdae90fdb7f780b515d419c624e55ed07ceb4336a91b585869e2198b2d906a024b32c8e57afd7a284af8b9d1fc387416826df8c74dd8ad6e949b9d44ab190d58ecd7308fe6f3b9f9de2860459c12fee9a2b53300a9f083c5be0a1cdac2c28d119ac368971c18283f6832b9a665ef6565bf65a9ffc32d50965562eb776dae5f6c3565c6e9ed4a23c83fa20042a5b882e99758c008b443563caf7f0d5333c47f436fa30c201233fb7de5a5a3efdbb197f90d664be6b9a8e958bae27b032f2bfe1407c394c81442ffcbee12f57e5b05f4cd39d8b7f7c4459cc2038ad675b2eb452e95118b2c58c6a5f9d23f85052ad4d40209b547dce5a0ea0ef5cdf0e2bf53e635d4cb4ed14396ed3a92d990de066f0cbd1e3027afcc898f48cc311899095dd050e203c677c8696a2adb5bbc5eef4f81d3f425a5c626a727b7e81a4a6bfcfd7dc111b424d5477a3ae13506167757d858a9294c0cfe1fd0000000000000000000000000000000000000000000000000010212937'}
new pqc event is valid True
pubkey list: ['46ec2052e0881499a977ae5b29a65910b0f3174eefb91cf845d8e349a0f93db8', 'dc9a2669b7a0a57a30970678ec487bee857ddf6ca2423126b7724ffce0cea1ab06f99f9872e6cfd029d06d8921e0b30b15b21aa240f29870d3fa703de5fd997f59c6b6c3a3398e3db7a409dfcc7740b719823feafcd53b796c023fd410cb84b1ef54e7cff28a3dc64a94baf2f641acd8ca5bf70eaf20b28802b803718a23e28d92185ba8f332745e029eec142d03d890a6ca610027d62361673371bfca81d670bc2429f3b0d7bc59f6552cabde411e33c5a0015d69c85a90e6f550ee895f56773224b18794801ad5cc047bc859a452e1696c452d6b5ff5307be46312892d6efd2b0cd750c4127ff9ef1f8edaeb2fb9ccc63faba31d11d45798a1c8a498b088b6dd3e3d571cd6949a1cf3c65082335356302a4d0f7aef8f7ce13b1fe41671604a437518ffe0048cd39cedc2a5262e869c2036f006632847413535aa5e4bdec6118962cc2007ec33542ce884b0ac72211966b32f3765c78a2bb927144d40db2f1c138d857dba0dfe9d46ecc3dd138764cb5e29b412583013bf5e84e905a4e1ce7df240e1fb8d821829cba460bcb8ac63aee50ae99044385e674ae8cc4e086ebbc00e17e599ae5c30952b1ec679f48f4b25d9dfd481daea480cea69e4d7e01e0a4f1129739fe50ccb31e4d2b4581ddb203c03f014c3fcbca0dcbf5878a77a4c61f9bdc2baaa55d332bb1d657cb3d9e79fdea03bfcdcf324f41449575e07c8e328fec205b66d38f403defb84a69e913104851c7dbb568261ab9ccba2892b5e2f04313c3f1fb6810502d8b3948f8d118cd5665ab5bdafa96bbcf5c9050b45deea80a6f0f1ea2055639fe480e6ad7176cb0208d863ff0fe4db7d370bfb64b56eaaf4bfc13d9dc3781fa5ed1f800756b734a01480875e2c40f6a39d98641a600096dba09e029c5c784415073a97249b6badb29f4ced6c394c74fbb603fc1a5b4104d3ae760a780015719f3f7202657e4610b6252c4398e1ee44f21bb7cc8be40510c3186003f5f493e88a7c5e34dfcd9dea08f3f1040ef772b9a7ce1056a3d8ee2effb774f76688002da9d40a0e7e9e56c59ce4ec83760524858a7c40a9df098f0e207335778269c9f48b84a710ee95c78cf9b626c9d7da0d801ef99e0077964cbf895b00e1d203d58879e96fab9391ce78124548ffaecfc9f84ac988623599b349c4ed497251344c14502cc58df441b02e52516b9fd7ea869be185da0700a78be295db96e65d85ed676ac6a26171b60d79dcc8c1a60c9531b82e34cb72617e592ed938e478b8dc07277a3516f97d62daf79042984c1cf99ec4802fca47be6a478dceeb2c48fc98f1292d8f7bd73cfdf4bc7273474b93c3ff569b95ad1c790bb5c90f651ba4e29779134d6361a47676290f6ff8c1861b41b0b59e6cd28d70e0bb1639dc091d6c9b80f4179ed67cb2c128ca1f9b4b42b9a8e9aafdf9080f01f98e851092ae97fb8d7bba3fc7a7bc0f2ae9e4ea5996bd485c5af87c24e88d261ea422d439c048917c460228ad1339d0ba7a3f9a633c8a5dff5935744a0ae7093a2a9b50c953f382ef0554c5808e4365ea8bd17a07bcb3fc3246613747332bd0afd939cb75fd0ca4ee21476d796e24ad148864cd41d02715aba3047a36f78bc68dc673de2dea76a4fd22cbcdb93b7fd086243b889734d82f972691a0dac2ad27dcef77dc916f58a883136de7d0f5ae8211424ea2a1fb684f2f612c0a4cafc6dc89ec9d42272cf1358ec716c3ea569deabab6c580e1d15b21f94cf58316eebdb1c772e67420b9286d249fb2c5c6dd4c88ebdf183b8687de6b20293376b40fed81aae73ac7edf6dc542bad32af61eef4e376f79d4b06d400c779c9abdad491952ffafce16c2b']
[{'limit': 100, 'authors': ['46ec2052e0881499a977ae5b29a65910b0f3174eefb91cf845d8e349a0f93db8', 'dc9a2669b7a0a57a30970678ec487bee857ddf6ca2423126b7724ffce0cea1ab06f99f9872e6cfd029d06d8921e0b30b15b21aa240f29870d3fa703de5fd997f59c6b6c3a3398e3db7a409dfcc7740b719823feafcd53b796c023fd410cb84b1ef54e7cff28a3dc64a94baf2f641acd8ca5bf70eaf20b28802b803718a23e28d92185ba8f332745e029eec142d03d890a6ca610027d62361673371bfca81d670bc2429f3b0d7bc59f6552cabde411e33c5a0015d69c85a90e6f550ee895f56773224b18794801ad5cc047bc859a452e1696c452d6b5ff5307be46312892d6efd2b0cd750c4127ff9ef1f8edaeb2fb9ccc63faba31d11d45798a1c8a498b088b6dd3e3d571cd6949a1cf3c65082335356302a4d0f7aef8f7ce13b1fe41671604a437518ffe0048cd39cedc2a5262e869c2036f006632847413535aa5e4bdec6118962cc2007ec33542ce884b0ac72211966b32f3765c78a2bb927144d40db2f1c138d857dba0dfe9d46ecc3dd138764cb5e29b412583013bf5e84e905a4e1ce7df240e1fb8d821829cba460bcb8ac63aee50ae99044385e674ae8cc4e086ebbc00e17e599ae5c30952b1ec679f48f4b25d9dfd481daea480cea69e4d7e01e0a4f1129739fe50ccb31e4d2b4581ddb203c03f014c3fcbca0dcbf5878a77a4c61f9bdc2baaa55d332bb1d657cb3d9e79fdea03bfcdcf324f41449575e07c8e328fec205b66d38f403defb84a69e913104851c7dbb568261ab9ccba2892b5e2f04313c3f1fb6810502d8b3948f8d118cd5665ab5bdafa96bbcf5c9050b45deea80a6f0f1ea2055639fe480e6ad7176cb0208d863ff0fe4db7d370bfb64b56eaaf4bfc13d9dc3781fa5ed1f800756b734a01480875e2c40f6a39d98641a600096dba09e029c5c784415073a97249b6badb29f4ced6c394c74fbb603fc1a5b4104d3ae760a780015719f3f7202657e4610b6252c4398e1ee44f21bb7cc8be40510c3186003f5f493e88a7c5e34dfcd9dea08f3f1040ef772b9a7ce1056a3d8ee2effb774f76688002da9d40a0e7e9e56c59ce4ec83760524858a7c40a9df098f0e207335778269c9f48b84a710ee95c78cf9b626c9d7da0d801ef99e0077964cbf895b00e1d203d58879e96fab9391ce78124548ffaecfc9f84ac988623599b349c4ed497251344c14502cc58df441b02e52516b9fd7ea869be185da0700a78be295db96e65d85ed676ac6a26171b60d79dcc8c1a60c9531b82e34cb72617e592ed938e478b8dc07277a3516f97d62daf79042984c1cf99ec4802fca47be6a478dceeb2c48fc98f1292d8f7bd73cfdf4bc7273474b93c3ff569b95ad1c790bb5c90f651ba4e29779134d6361a47676290f6ff8c1861b41b0b59e6cd28d70e0bb1639dc091d6c9b80f4179ed67cb2c128ca1f9b4b42b9a8e9aafdf9080f01f98e851092ae97fb8d7bba3fc7a7bc0f2ae9e4ea5996bd485c5af87c24e88d261ea422d439c048917c460228ad1339d0ba7a3f9a633c8a5dff5935744a0ae7093a2a9b50c953f382ef0554c5808e4365ea8bd17a07bcb3fc3246613747332bd0afd939cb75fd0ca4ee21476d796e24ad148864cd41d02715aba3047a36f78bc68dc673de2dea76a4fd22cbcdb93b7fd086243b889734d82f972691a0dac2ad27dcef77dc916f58a883136de7d0f5ae8211424ea2a1fb684f2f612c0a4cafc6dc89ec9d42272cf1358ec716c3ea569deabab6c580e1d15b21f94cf58316eebdb1c772e67420b9286d249fb2c5c6dd4c88ebdf183b8687de6b20293376b40fed81aae73ac7edf6dc542bad32af61eef4e376f79d4b06d400c779c9abdad491952ffafce16c2b']}]
finished query 2
each: regular event is valid: True
each: quantum event again is valid: True
```

If you want to see what I had to do to make the events and relay post-quantum ready, have a look at the [nqsafe.py](./app/nqsafe.py) and the [pqr.py](./app/pqr.py). I use the `monstr` library and these two files show `PQEvent` and `PQRelay` which are inherited from `Event` and `Relay`

## Next Steps

I plan to add this as a capability to Safebox, for signing and verifying private records. 
I also plan to look into 'ML-KEM' for key exchange and encryption to see what I need to add to NIP-44 and how I can incorporate into NIP-17 messages.